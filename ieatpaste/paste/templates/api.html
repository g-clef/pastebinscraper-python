{% extends "base.html" %}

{% block navbar %}
	{% with application="api" %}
		{{ block.super }}
	{% endwith %}
{% endblock %}

{% block maincontent %}

     <div class="col-md-offset-1 col-md-6 row">
        <h4>Using the API</h4>
     </div>

     <div class="well col-md-offset-1 col-md-6 row">
           <p>Your API key: {{user.api_key.key}}</p>
           <p>Your username: {{user.username}}</p>
     </div>

     <div class="col-md-offset-1 col-md-8 row">
<p>The API to search pastes can be reached at https://ieatpaste.accessviolation.org/paste/api/v1/search/query</p>
<p>The search URL is looking for a number of arguments: 
	<ul>
		<li><strong>format=json</strong> Right now tastypie only supports json output, so this is mandatory</li>
		<li><strong>q=YourQuery</strong> This is the field you want to search</li>
                <li><strong>username=MyUsername</strong> Your username, as above, so "username={{user.username}}"</li>
                <li><strong>api_key=MyAPIKey</strong> Your api key, as above, so "api_key={{user.api_key.key}}"</li>
	</ul>
These can be supplied in the url of the query (as a GET request) or as arguments to a POST (note: haven't tested POST searching yet).
</p>
<p>So, for example, a search for the phrase "testing" using your username & api_key would look like:</p> 
<code>https://ieatpaste.accessviolation.org/paste/api/v1/search/query/?format=json&api_key={{user.api_key.key}}&username={{user.username}}&q=testing</code>
<p>(Note: that search will return a surprising number of hits, as a lot of people put "testing" in their pastes)</p>
<P> the results will be a json-formatted response, as a dictionary ("hash" for you non-python folks), with any results being in the "hits" key</p>

      </div>



{% endblock %}

